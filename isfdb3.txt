work in progress!



[Metadata Source Plugin] ISFDB3 - Version 1.0.0 - 01-31-2022

Downloads metadata and covers from the Internet Speculative Fiction Database (http://www.isfdb.org/)
This database provides title and publication records (1:n) and series records with a bunch of information (covers, artists, translations, prices, notes, ...), compiled by volunteers.

An web search form is under http://www.isfdb.org/cgi-bin/adv_search_menu.cgi
There is also an web api under http://www.isfdb.org/wiki/index.php/Web_API, but this is not in use yet by the plugin, because the interface only supplies a subset of the data.

Background:

This is a fork of Adrianna Pińska's ISFDB2. For more information see https://github.com/confluence/isfdb2-calibre

In mid 2021 I forked the codebase and make some changes and addition to the code.
Adriana contacted me and wrote: 
"Hello! I haven't worked on this for a while, but I intend to get back to it (I still haven't finished cataloguing my library!). 
When I do I will go through your code and see if I can merge some of the features. I would first probably pull it into a separate branch and eliminate some of the conflicts (e.g. restore the original subdirectory structure, eliminate the committed IDE project files, etc.). I will make further comments in this PR when I get around to doing this. :)
I don't mind if this plugin is submitted to the plugin repository -- but I am not active on the Mobileread forums, so I am unlikely to do this anytime soon. You are welcome to! If you decide to submit your forked version, please change the name (to isfdb3-calibre?), to make it clear that it's not the same plugin and may have slightly different behaviour."

So I have created the plugin isfdb3 an submitted it to the plugin repository.

Main changes compared to isfdb2:

- Change char encoding from utf-8 to iso-8859-1 (as isfdb.org uses) for search strings to avoid notfound errors für non-ASCII chars (e. g. german umlauts)
- Add additional identifiers from ISFDB: DNB, OCLC/WorldCat
- Modify method "clean_downloaded_metadata()": Fixcase title and author(s) only when language is english
- Series and series_index from publishing page
- Fechting information from the series page
- Adding config file (not active yet)
- Option for combine series and sub-series names 
- Workaround for Calibre's too strict merge method on same title/author(s) by adding sequence number to title field
- Workarounds for not Calibre's float format compatible series numbers (61/62, roman numbers)
- Convert language field text to Calibre's language code
- Matching title and publication not only by title, but also by publication list in title record 


Explanations:

Workaround for Calibre's too strict merge method:
Calibre merge all books with the same author and the same title regardless of different other data.
Example from Calibre's log:
---
Running identify query with parameters: 
{'title': 'The Stars My Destination', 'authors': ['Alfred Bester'], 'identifiers': {}, 'timeout': 30} 


Using plugins: ISFDB3 (1, 0, 0) 
The log from individual plugins is below 

****************************** ISFDB3 (1, 0, 1) ****************************** 
Found 37 results 
Downloading from ISFDB3 took 15.561829328536987 

isfdb2: 9 results

as extreme example:
In the vault
isfdb2: 1 title and 0 publications
isfdb3: 2 titles and 95 publications


Guards! Guards!
Terry Pratchett
isfdb3: 32 results
isfdb2: 4 results





Features:

- Korrekte Behandlung von Umlauten (Codierung der Website ist iso, nicht utf). Beispiel: "Großeinsatz Morgenröte" wird nicht gefunden

title list has 2 title records (in isfdb2 there are merged!):
http://www.isfdb.org/cgi-bin/title.cgi?2946687 -> pub http://www.isfdb.org/cgi-bin/pl.cgi?868274
http://www.isfdb.org/cgi-bin/title.cgi?41896 -> a bunch of pubs!


Planned Features:

Quelle: 
Puclication Record: http://www.isfdb.org/cgi-bin/pl.cgi?756102
Title Record: http://www.isfdb.org/cgi-bin/title.cgi?2675342
Series Record: http://www.isfdb.org/cgi-bin/pe.cgi?57638

Catalog ID: Charr05  (in pub record)
Webpages: wiki.rendhark-universe.net (in pub record)


Find series in contents (pub record):
Chapbook Title: Herrscher und Sklaven • chapbook by Konrad Schaef [as by Conrad Shepherd]
Contents (view Concise Listing)
5 • Herrscher und Sklaven • [Forschungsraumer Charr • 5] • novella by Konrad Schaef [as by Conrad Shepherd]


ToDo:

- Using of isfdb web api: http://www.isfdb.org/wiki/index.php/Web_API


Limitations:

Die Markierung (pub# n) muss manuell oder per Abfrage entfernt werden.


Version History:

v.1.0.0 01-31-2022
- Initial release


Installation:


How to report Bugs and suggestions:


